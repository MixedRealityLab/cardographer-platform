# Cardographer API

## User 

Note, user API methods typically require authentication with
a JWT bearer token in the Authorization header. 
Currently this is generated by the server via `api/user/login`, 
and must include `email`.

### Card authoring

Authentication (placeholder):

- [x] `api/user/login` POST LoginRequest -> LoginResponse 
  (should change to OAuth or OpenID Connect at some point).
  Note, also sets the cookie used for browser access control.
- [x] `api/user/logout` POST () -> (). 

Deck authoring:

- [x] `api/user/decks.json` GET (auth. JWT email) -> 
  CardDeckSummary[] with email in owners.
- [x] `api/user/decks/[deckid]/revisions.json` GET (auth. JWT email) ->
  CardDeckRevisionSummary[] 
- [ ] `api/user/decks/[deckid]/revisions/[revid].json` GET (auth. JWT email
  or revision isPublic) -> CardDeckRevision
- [ ] `api/user/decks` POST CardDeckRevision (auth) -> {deckid,revid=1}
- [ ] `api/user/decks/[deckid]/revisions` POST CardDeckRevision (auth.)
  -> {revid}
- [ ] `api/user/decks/[deckid]` POST CardDeckSummary {owners, isPublic}
  (auth.) -> ()
- [ ] `api/user/decks/[deckid]/revisions/[revid]` POST CardDeckRevision
  (auth.) -> ()

Files (TBC):

- [ ] `api/user/decks/[deckid]/revisions/[revid]/outputfiles` GET 
  (auth) -> file info []
- [ ] `api/user/decks/[deckid]/revisions/[revid]/outputfiles/[filename]`
  GET (auth) -> file content
- [ ] `api/user/decks/[deckid]/revisions/[revid]/outputfiles/[filename]` 
  PUT (auth) file content -> ()
- [ ] `api/user/decks/[deckid]/revisions/[revid]/outputfiles/[filename]`
  DELETE (auth) -> ()

Ditto for `.../buildfiles...`

Public decks:
- [ ] `api/public/decks.json` GET -> CardDeckSummary[] with isPublic
- [ ] `api/public/decks/[deckid]/revisions.json` GET ->
  CardDeckRevisionSummary[] (if deck isPublic and revision isPublic)
- [ ] `api/public/decks/[deckid]/revisions/[revid].json` GET 
  (revision isPublic) -> CardDeckRevision

Deck use:
- [ ] `api/client/decks/[deckid]/revisions/[revid].json` GET (auth
  or isPublic) -> subset? of CardDeckRevision
- [ ] `api/client/decks/[deckid]/revisions/[revid]/outputfiles/[filename]`
  GET (auth or isPublic) -> file content

## Sessions

To do
 
